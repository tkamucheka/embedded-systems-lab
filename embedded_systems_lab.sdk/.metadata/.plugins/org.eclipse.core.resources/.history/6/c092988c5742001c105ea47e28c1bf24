/*
 * main.c
 *
 *  Created on: Nov 9, 2021
 *      Author: tendayi
 */

/*
 * Empty C++ Application
 */

#include "artyBotLib.h"
#include "xparameters.h"
#include "xgpio.h"

#define LED_CHANNEL 1
#define SW_CHANNEL 2

XGpio gpio1;

int main()
{
  // Initialize GPIO buttons and LEDs
  XGpio_Initialize(&gpio1, XPAR_GPIO_1_DEVICE_ID);
  XGpio_SetDataDirection(&gpio1, LED_CHANNEL, 0);
  XGpio_SetDataDirection(&gpio1, SW_CHANNEL, 15);

  // initialize ArtyBot peripherals
  artyBotInit();
  // xil_printf("Initialization complete...\r");

  int i = 0;
  while (1)
  {
    // Example 1: Basic driving
    if (XGpio_DiscreteRead(&gpio1, SW_CHANNEL) & 1)
    {
      drawPolygon(4, 20);
    }

    // Example 2: Draw polygon
    if (XGpio_DiscreteRead(&gpio1, SW_CHANNEL) & 2)
    {
    	for (i = 0; i < 4; ++i) {

    	}
    }
    // xil_printf("Examples finished.\r");
  }

  artyBotEnd();

  return 0;
}

void drawPolygon(int n, int sideLength) {
    for (int i = 0; i < n; ++i)
    {
      driveForward(sideLength);
      turnRight(360 / n);
    }
}
